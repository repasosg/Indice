<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catal√† Divertit - 5√® Prim√†ria</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap');
        
        body {
            font-family: 'Fredoka', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            background-attachment: fixed;
        }

        .opt-btn {
            transition: all 0.3s ease;
            transform: scale(1);
        }

        .opt-btn:hover {
            transform: scale(1.05) rotate(-1deg);
        }

        .btn-correct {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important;
            color: white !important;
            border-color: #059669 !important;
            animation: bounce 0.5s ease;
        }
        
        .btn-wrong {
            background: linear-gradient(135deg, #f43f5e 0%, #e11d48 100%) !important;
            color: white !important;
            border-color: #e11d48 !important;
            animation: shake 0.5s ease;
        }

        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.15); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .float-animation {
            animation: float 3s ease-in-out infinite;
        }

        .card-hover {
            transition: all 0.3s ease;
        }

        .card-hover:hover {
            transform: translateY(-8px) rotate(1deg);
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }
        
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        .word-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .word-card:hover {
            transform: scale(1.1) rotate(-2deg);
        }

        .word-card.selected-s-sorda {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%) !important;
            color: white !important;
            transform: scale(1.05);
        }

        .word-card.selected-s-sonora {
            background: linear-gradient(135deg, #4ecdc4 0%, #44a8a0 100%) !important;
            color: white !important;
            transform: scale(1.05);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section {
            animation: fadeIn 0.5s ease;
        }

        input[type="text"], input[type="number"], textarea {
            transition: all 0.3s ease;
        }

        input[type="text"]:focus, input[type="number"]:focus, textarea:focus {
            transform: scale(1.02);
            box-shadow: 0 0 25px rgba(102, 126, 234, 0.4);
        }

        .letter-btn {
            transition: all 0.2s ease;
        }

        .letter-btn:hover:not(:disabled) {
            transform: scale(1.15) rotate(-3deg);
        }

        .generate-btn {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            transition: all 0.3s ease;
        }

        .generate-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(17, 153, 142, 0.4);
        }

        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60%, 100% { content: '...'; }
        }

        .loading:after {
            content: '...';
            animation: dots 1.5s steps(4, end) infinite;
        }
    </style>
</head>
<body class="min-h-screen">

    <nav class="bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-600 text-white shadow-2xl sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex flex-col lg:flex-row justify-between items-center py-4 gap-3">
                <div class="text-3xl font-bold flex items-center gap-3">
                    <i class="fas fa-book-open text-yellow-300 float-animation"></i>
                    <span class="hidden lg:inline">Catal√† Super Divertit</span>
                    <span class="lg:hidden">Catal√† 5√®</span>
                    <i class="fas fa-star text-yellow-300 float-animation" style="animation-delay: 0.5s;"></i>
                </div>
                <div class="flex gap-2 overflow-x-auto no-scrollbar py-1 w-full lg:w-auto">
                    <button onclick="showSection('adjectiu')" class="px-3 py-2 rounded-2xl hover:scale-110 transition font-bold whitespace-nowrap bg-yellow-400 text-purple-900 shadow-lg text-sm">
                        <i class="fas fa-spell-check mr-1"></i>L'Adjectiu
                    </button>
                    <button onclick="showSection('graus')" class="px-3 py-2 rounded-2xl hover:scale-110 transition font-bold whitespace-nowrap bg-orange-400 text-white shadow-lg text-sm">
                        <i class="fas fa-chart-line mr-1"></i>Graus
                    </button>
                    <button onclick="showSection('sufixos')" class="px-3 py-2 rounded-2xl hover:scale-110 transition font-bold whitespace-nowrap bg-purple-400 text-white shadow-lg text-sm">
                        <i class="fas fa-puzzle-piece mr-1"></i>Sufixos
                    </button>
                    <button onclick="showSection('s-sorda-sonora')" class="px-3 py-2 rounded-2xl hover:scale-110 transition font-bold whitespace-nowrap bg-pink-400 text-white shadow-lg text-sm">
                        <i class="fas fa-volume-up mr-1"></i>S Sorda/Sonora
                    </button>
                    <button onclick="showSection('noticia')" class="px-3 py-2 rounded-2xl hover:scale-110 transition font-bold whitespace-nowrap bg-blue-400 text-white shadow-lg text-sm">
                        <i class="fas fa-newspaper mr-1"></i>La Not√≠cia
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div class="max-w-6xl mx-auto px-4 py-8">
        
        <!-- Score Board -->
        <div class="bg-white rounded-3xl shadow-2xl p-6 mb-8 flex justify-around items-center">
            <div class="text-center">
                <div class="text-5xl font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent">
                    <span id="correct-count">0</span>
                </div>
                <div class="text-lg font-semibold text-gray-600">
                    <i class="fas fa-check-circle text-green-500"></i> Encerts
                </div>
            </div>
            <div class="text-6xl">üéØ</div>
            <div class="text-center">
                <div class="text-5xl font-bold bg-gradient-to-r from-red-600 to-rose-600 bg-clip-text text-transparent">
                    <span id="incorrect-count">0</span>
                </div>
                <div class="text-lg font-semibold text-gray-600">
                    <i class="fas fa-times-circle text-red-500"></i> Errors
                </div>
            </div>
        </div>

        <!-- SECCI√ì 1: L'ADJECTIU -->
        <div id="adjectiu" class="section hidden">
            <div class="bg-white rounded-3xl shadow-2xl p-8 mb-6">
                <h2 class="text-4xl font-bold text-center mb-6 bg-gradient-to-r from-yellow-600 to-orange-600 bg-clip-text text-transparent">
                    <i class="fas fa-spell-check mr-3"></i>L'Adjectiu
                </h2>
                
                <div class="bg-gradient-to-br from-yellow-50 to-orange-50 border-l-8 border-yellow-400 rounded-2xl p-6 mb-8">
                    <h3 class="text-2xl font-bold text-yellow-700 mb-3">
                        <i class="fas fa-lightbulb mr-2"></i>Qu√® √©s un adjectiu?
                    </h3>
                    <p class="text-lg text-gray-700 leading-relaxed mb-3">
                        L'adjectiu √©s una paraula que expressa <strong>qualitats o caracter√≠stiques del nom</strong>. 
                        Concorden en g√®nere i nombre amb el nom que acompanya.
                    </p>
                    <ul class="space-y-2 text-gray-700">
                        <li class="flex items-start">
                            <i class="fas fa-arrow-right text-yellow-500 mr-3 mt-1"></i>
                            <span>Generalment tenen forma mascul√≠/femen√≠: <em>eixut/eixuta, estret/estreta</em></span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-arrow-right text-yellow-500 mr-3 mt-1"></i>
                            <span>Altres tenen forma √∫nica: <em>alegre/alegre, feli√ß/feli√ß</em></span>
                        </li>
                    </ul>
                </div>

                <div id="adjectiu-exercises"></div>
                
                <button onclick="generateMoreExercises('adjectiu')" class="generate-btn text-white font-bold py-4 px-8 rounded-2xl shadow-lg mx-auto block text-xl mt-6">
                    <i class="fas fa-magic mr-2"></i>Generar m√©s exercicis
                </button>
                <div id="adjectiu-extra" class="mt-6"></div>
            </div>
        </div>

        <!-- SECCI√ì 2: GRAUS DE L'ADJECTIU -->
        <div id="graus" class="section hidden">
            <div class="bg-white rounded-3xl shadow-2xl p-8 mb-6">
                <h2 class="text-4xl font-bold text-center mb-6 bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent">
                    <i class="fas fa-chart-line mr-3"></i>Graus de l'Adjectiu
                </h2>
                
                <div class="bg-gradient-to-br from-orange-50 to-red-50 border-l-8 border-orange-400 rounded-2xl p-6 mb-8">
                    <h3 class="text-2xl font-bold text-orange-700 mb-3">
                        <i class="fas fa-lightbulb mr-2"></i>Graus de l'adjectiu
                    </h3>
                    <div class="space-y-3 text-lg text-gray-700">
                        <div class="bg-white p-4 rounded-xl border-2 border-orange-200">
                            <strong class="text-orange-600">Positiu:</strong> Indica la qualitat: <em>alt</em>
                        </div>
                        <div class="bg-white p-4 rounded-xl border-2 border-orange-200">
                            <strong class="text-orange-600">Comparatiu:</strong> Compara la intensitat:
                            <ul class="ml-6 mt-2 space-y-1">
                                <li>‚Ä¢ <strong>Superioritat:</strong> m√©s alt que...</li>
                                <li>‚Ä¢ <strong>Igualtat:</strong> tan alt com...</li>
                                <li>‚Ä¢ <strong>Inferioritat:</strong> menys alt que...</li>
                            </ul>
                        </div>
                        <div class="bg-white p-4 rounded-xl border-2 border-orange-200">
                            <strong class="text-orange-600">Superlatiu:</strong> Grau m√†xim: <em>alt√≠ssim / el m√©s alt</em>
                        </div>
                    </div>
                </div>

                <div id="graus-exercises"></div>
                
                <button onclick="generateMoreExercises('graus')" class="generate-btn text-white font-bold py-4 px-8 rounded-2xl shadow-lg mx-auto block text-xl mt-6">
                    <i class="fas fa-magic mr-2"></i>Generar m√©s exercicis
                </button>
                <div id="graus-extra" class="mt-6"></div>
            </div>
        </div>

        <!-- SECCI√ì 3: SUFIXOS -->
        <div id="sufixos" class="section hidden">
            <div class="bg-white rounded-3xl shadow-2xl p-8 mb-6">
                <h2 class="text-4xl font-bold text-center mb-6 bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent">
                    <i class="fas fa-puzzle-piece mr-3"></i>Sufixos de l'Adjectiu
                </h2>
                
                <div class="bg-gradient-to-br from-purple-50 to-pink-50 border-l-8 border-purple-400 rounded-2xl p-6 mb-8">
                    <h3 class="text-2xl font-bold text-purple-700 mb-3">
                        <i class="fas fa-lightbulb mr-2"></i>Tipus de sufixos
                    </h3>
                    <div class="space-y-3 text-lg">
                        <div class="bg-white p-4 rounded-xl border-2 border-blue-200">
                            <strong class="text-blue-600">Diminutiu</strong> 
                            <span class="text-gray-600">(-et/-eta, -ol/-ola, -√≥/-ona, -√≠/-ina):</span> 
                            <em class="text-purple-600">vellet, petit√≥</em>
                        </div>
                        <div class="bg-white p-4 rounded-xl border-2 border-green-200">
                            <strong class="text-green-600">Augmentatiu</strong> 
                            <span class="text-gray-600">(-√†s/-assa, -arr√≥/-arrona):</span> 
                            <em class="text-purple-600">gross√†s, brutarro</em>
                        </div>
                        <div class="bg-white p-4 rounded-xl border-2 border-red-200">
                            <strong class="text-red-600">Despectiu</strong> 
                            <span class="text-gray-600">(-ot/-ota, -astre/-astra):</span> 
                            <em class="text-purple-600">baixota, poetastre</em>
                        </div>
                    </div>
                </div>

                <div id="sufixos-exercises"></div>
                
                <button onclick="generateMoreExercises('sufixos')" class="generate-btn text-white font-bold py-4 px-8 rounded-2xl shadow-lg mx-auto block text-xl mt-6">
                    <i class="fas fa-magic mr-2"></i>Generar m√©s exercicis
                </button>
                <div id="sufixos-extra" class="mt-6"></div>
            </div>
        </div>

        <!-- SECCI√ì 4: S SORDA I SONORA -->
        <div id="s-sorda-sonora" class="section hidden">
            <div class="bg-white rounded-3xl shadow-2xl p-8 mb-6">
                <h2 class="text-4xl font-bold text-center mb-6 bg-gradient-to-r from-pink-600 to-rose-600 bg-clip-text text-transparent">
                    <i class="fas fa-volume-up mr-3"></i>S Sorda i S Sonora
                </h2>
                
                <div class="bg-gradient-to-br from-pink-50 to-rose-50 border-l-8 border-pink-400 rounded-2xl p-6 mb-8">
                    <h3 class="text-2xl font-bold text-pink-700 mb-4">
                        <i class="fas fa-lightbulb mr-2"></i>Regles S Sorda i Sonora
                    </h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="bg-red-100 p-4 rounded-xl border-3 border-red-300">
                            <h4 class="font-bold text-red-700 text-xl mb-2">üî¥ S SORDA (so fort)</h4>
                            <ul class="space-y-1 text-gray-700">
                                <li><strong>S:</strong> inici/final, vocal+consonant</li>
                                <li><strong>SS:</strong> entre vocals (passer)</li>
                                <li><strong>C+E/I:</strong> cercle, cirera</li>
                                <li><strong>√á+A/O/U:</strong> ca√ßa, cami√≥</li>
                                <li><strong>SC:</strong> entre vocals (piscina)</li>
                            </ul>
                        </div>
                        <div class="bg-blue-100 p-4 rounded-xl border-3 border-blue-300">
                            <h4 class="font-bold text-blue-700 text-xl mb-2">üîµ S SONORA (so suau)</h4>
                            <ul class="space-y-1 text-gray-700">
                                <li><strong>S:</strong> entre vocals (casa)</li>
                                <li><strong>Z:</strong> inici (zebra)</li>
                                <li><strong>Z:</strong> despr√©s consonant (marxar)</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div id="s-sorda-sonora-exercises"></div>
                
                <button onclick="generateMoreExercises('s-sorda-sonora')" class="generate-btn text-white font-bold py-4 px-8 rounded-2xl shadow-lg mx-auto block text-xl mt-6">
                    <i class="fas fa-magic mr-2"></i>Generar m√©s exercicis
                </button>
                <div id="s-sorda-sonora-extra" class="mt-6"></div>
            </div>
        </div>

        <!-- SECCI√ì 5: LA NOT√çCIA -->
        <div id="noticia" class="section hidden">
            <div class="bg-white rounded-3xl shadow-2xl p-8 mb-6">
                <h2 class="text-4xl font-bold text-center mb-6 bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent">
                    <i class="fas fa-newspaper mr-3"></i>La Not√≠cia
                </h2>
                
                <div class="bg-gradient-to-br from-blue-50 to-indigo-50 border-l-8 border-blue-400 rounded-2xl p-6 mb-8">
                    <h3 class="text-2xl font-bold text-blue-700 mb-3">
                        <i class="fas fa-lightbulb mr-2"></i>Parts de la not√≠cia
                    </h3>
                    <div class="space-y-3 text-lg">
                        <div class="bg-white p-4 rounded-xl border-2 border-yellow-200">
                            <strong class="text-yellow-700">TITULAR/CAP√áALERA:</strong> 
                            <span class="text-gray-700">Informaci√≥ essencial i impactant</span>
                        </div>
                        <div class="bg-white p-4 rounded-xl border-2 border-green-200">
                            <strong class="text-green-700">ENTRADA:</strong> 
                            <span class="text-gray-700">Resum breu de la not√≠cia</span>
                        </div>
                        <div class="bg-white p-4 rounded-xl border-2 border-purple-200">
                            <strong class="text-purple-700">COS:</strong> 
                            <span class="text-gray-700">Respon: qu√®, qui, quan, on, com, per qu√®</span>
                        </div>
                        <div class="bg-white p-4 rounded-xl border-2 border-pink-200">
                            <strong class="text-pink-700">IMATGES:</strong> 
                            <span class="text-gray-700">Faciliten la comprensi√≥</span>
                        </div>
                    </div>
                </div>

                <div id="noticia-exercises"></div>
                
                <button onclick="generateMoreExercises('noticia')" class="generate-btn text-white font-bold py-4 px-8 rounded-2xl shadow-lg mx-auto block text-xl mt-6">
                    <i class="fas fa-magic mr-2"></i>Generar m√©s exercicis
                </button>
                <div id="noticia-extra" class="mt-6"></div>
            </div>
        </div>

    </div>

    <script>
        let correctCount = 0;
        let incorrectCount = 0;
        let isGenerating = false;
        let exerciseCounters = {
            adjectiu: 0,
            graus: 0,
            sufixos: 0,
            's-sorda-sonora': 0,
            noticia: 0
        };
        let currentSection = 'adjectiu';

        function showSection(sectionId) {
            currentSection = sectionId;
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
            });
            document.getElementById(sectionId).classList.remove('hidden');
            
            // Load initial exercises if not loaded
            const exerciseContainer = document.getElementById(sectionId + '-exercises');
            if (exerciseContainer.children.length === 0) {
                loadInitialExercises(sectionId);
            }
        }

        function loadInitialExercises(topic) {
            const container = document.getElementById(topic + '-exercises');
            const exercises = getInitialExercises(topic);
            container.innerHTML = exercises;
        }

        function getInitialExercises(topic) {
            const exercises = {
                'adjectiu': `
                    <div class="bg-gradient-to-br from-yellow-50 to-orange-50 rounded-2xl p-6 mb-6 border-4 border-yellow-300">
                        <div class="flex justify-between items-center mb-4">
                            <span class="bg-yellow-500 text-white px-4 py-2 rounded-full font-bold text-lg">Exercici 1</span>
                        </div>
                        <div class="text-xl font-semibold text-gray-800 mb-4">
                            Identifica els adjectius en aquesta frase: <br>
                            <span class="text-2xl text-purple-700 italic">"La casa gran t√© un jard√≠ bonic i flors vermelles."</span>
                        </div>
                        <div class="space-y-3">
                            <button onclick="checkAnswer(this, true, 'adj1')" class="opt-btn w-full px-6 py-4 border-4 border-green-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-green-50 to-green-100 text-green-800 shadow-lg">
                                gran, bonic, vermelles
                            </button>
                            <button onclick="checkAnswer(this, false, 'adj1')" class="opt-btn w-full px-6 py-4 border-4 border-blue-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-blue-50 to-blue-100 text-blue-800 shadow-lg">
                                casa, jard√≠, flors
                            </button>
                            <button onclick="checkAnswer(this, false, 'adj1')" class="opt-btn w-full px-6 py-4 border-4 border-purple-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-purple-50 to-purple-100 text-purple-800 shadow-lg">
                                gran, jard√≠, vermelles
                            </button>
                        </div>
                        <div class="feedback mt-4" id="feedback-adj1"></div>
                    </div>

                    <div class="bg-gradient-to-br from-yellow-50 to-orange-50 rounded-2xl p-6 mb-6 border-4 border-yellow-300">
                        <div class="flex justify-between items-center mb-4">
                            <span class="bg-yellow-500 text-white px-4 py-2 rounded-full font-bold text-lg">Exercici 2</span>
                        </div>
                        <div class="text-xl font-semibold text-gray-800 mb-4">
                            Quin adjectiu concorda correctament?<br>
                            <span class="text-2xl text-purple-700 italic">"Les noies s√≥n molt _______"</span>
                        </div>
                        <div class="space-y-3">
                            <button onclick="checkAnswer(this, false, 'adj2')" class="opt-btn w-full px-6 py-4 border-4 border-blue-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-blue-50 to-blue-100 text-blue-800 shadow-lg">
                                alt
                            </button>
                            <button onclick="checkAnswer(this, false, 'adj2')" class="opt-btn w-full px-6 py-4 border-4 border-purple-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-purple-50 to-purple-100 text-purple-800 shadow-lg">
                                alts
                            </button>
                            <button onclick="checkAnswer(this, true, 'adj2')" class="opt-btn w-full px-6 py-4 border-4 border-green-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-green-50 to-green-100 text-green-800 shadow-lg">
                                altes
                            </button>
                        </div>
                        <div class="feedback mt-4" id="feedback-adj2"></div>
                    </div>

                    <div class="bg-gradient-to-br from-yellow-50 to-orange-50 rounded-2xl p-6 mb-6 border-4 border-yellow-300">
                        <div class="flex justify-between items-center mb-4">
                            <span class="bg-yellow-500 text-white px-4 py-2 rounded-full font-bold text-lg">Exercici 3</span>
                        </div>
                        <div class="text-xl font-semibold text-gray-800 mb-4">
                            Escriu 3 adjectius que descriguin el teu millor amic/amiga:
                        </div>
                        <input type="text" id="adj-input" placeholder="Exemple: simp√†tic, intel¬∑ligent, divertit..." 
                            class="w-full px-6 py-4 border-4 border-purple-300 rounded-2xl text-lg font-semibold">
                        <button onclick="checkOpenAnswer('adj-input', 'adj3')" 
                            class="mt-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold py-3 px-8 rounded-2xl shadow-lg hover:scale-105 transition">
                            <i class="fas fa-check mr-2"></i>Comprovar
                        </button>
                        <div class="feedback mt-4" id="feedback-adj3"></div>
                    </div>
                `,
                'graus': `
                    <div class="bg-gradient-to-br from-orange-50 to-red-50 rounded-2xl p-6 mb-6 border-4 border-orange-300">
                        <div class="flex justify-between items-center mb-4">
                            <span class="bg-orange-500 text-white px-4 py-2 rounded-full font-bold text-lg">Exercici 1</span>
                        </div>
                        <div class="text-xl font-semibold text-gray-800 mb-4">
                            Identifica el grau: <br>
                            <span class="text-2xl text-orange-700 italic">"La Maria √©s m√©s intel¬∑ligent que en Pere"</span>
                        </div>
                        <div class="space-y-3">
                            <button onclick="checkAnswer(this, false, 'grau1')" class="opt-btn w-full px-6 py-4 border-4 border-blue-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-blue-50 to-blue-100 text-blue-800 shadow-lg">
                                Positiu
                            </button>
                            <button onclick="checkAnswer(this, true, 'grau1')" class="opt-btn w-full px-6 py-4 border-4 border-green-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-green-50 to-green-100 text-green-800 shadow-lg">
                                Comparatiu de superioritat
                            </button>
                            <button onclick="checkAnswer(this, false, 'grau1')" class="opt-btn w-full px-6 py-4 border-4 border-purple-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-purple-50 to-purple-100 text-purple-800 shadow-lg">
                                Comparatiu d'igualtat
                            </button>
                            <button onclick="checkAnswer(this, false, 'grau1')" class="opt-btn w-full px-6 py-4 border-4 border-pink-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-pink-50 to-pink-100 text-pink-800 shadow-lg">
                                Superlatiu
                            </button>
                        </div>
                        <div class="feedback mt-4" id="feedback-grau1"></div>
                    </div>

                    <div class="bg-gradient-to-br from-orange-50 to-red-50 rounded-2xl p-6 mb-6 border-4 border-orange-300">
                        <div class="flex justify-between items-center mb-4">
                            <span class="bg-orange-500 text-white px-4 py-2 rounded-full font-bold text-lg">Exercici 2</span>
                        </div>
                        <div class="text-xl font-semibold text-gray-800 mb-4">
                            Completa amb el comparatiu d'igualtat:<br>
                            <span class="text-2xl text-orange-700 italic">"En Joan √©s ___ alt ___ el seu germ√†"</span>
                        </div>
                        <div class="space-y-3">
                            <button onclick="checkAnswer(this, false, 'grau2')" class="opt-btn w-full px-6 py-4 border-4 border-blue-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-blue-50 to-blue-100 text-blue-800 shadow-lg">
                                m√©s... que
                            </button>
                            <button onclick="checkAnswer(this, true, 'grau2')" class="opt-btn w-full px-6 py-4 border-4 border-green-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-green-50 to-green-100 text-green-800 shadow-lg">
                                tan... com
                            </button>
                            <button onclick="checkAnswer(this, false, 'grau2')" class="opt-btn w-full px-6 py-4 border-4 border-purple-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-purple-50 to-purple-100 text-purple-800 shadow-lg">
                                menys... que
                            </button>
                        </div>
                        <div class="feedback mt-4" id="feedback-grau2"></div>
                    </div>

                    <div class="bg-gradient-to-br from-orange-50 to-red-50 rounded-2xl p-6 mb-6 border-4 border-orange-300">
                        <div class="flex justify-between items-center mb-4">
                            <span class="bg-orange-500 text-white px-4 py-2 rounded-full font-bold text-lg">Exercici 3</span>
                        </div>
                        <div class="text-xl font-semibold text-gray-800 mb-4">
                            Quin √©s el superlatiu de "r√†pid"?
                        </div>
                        <div class="space-y-3">
                            <button onclick="checkAnswer(this, false, 'grau3')" class="opt-btn w-full px-6 py-4 border-4 border-blue-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-blue-50 to-blue-100 text-blue-800 shadow-lg">
                                m√©s r√†pid
                            </button>
                            <button onclick="checkAnswer(this, true, 'grau3')" class="opt-btn w-full px-6 py-4 border-4 border-green-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-green-50 to-green-100 text-green-800 shadow-lg">
                                rapid√≠ssim
                            </button>
                            <button onclick="checkAnswer(this, false, 'grau3')" class="opt-btn w-full px-6 py-4 border-4 border-purple-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-purple-50 to-purple-100 text-purple-800 shadow-lg">
                                tan r√†pid
                            </button>
                        </div>
                        <div class="feedback mt-4" id="feedback-grau3"></div>
                    </div>
                `,
                'sufixos': `
                    <div class="bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-6 mb-6 border-4 border-purple-300">
                        <div class="flex justify-between items-center mb-4">
                            <span class="bg-purple-500 text-white px-4 py-2 rounded-full font-bold text-lg">Exercici 1</span>
                        </div>
                        <div class="text-xl font-semibold text-gray-800 mb-4">
                            Quin tipus de sufix t√© la paraula <span class="text-2xl text-purple-700 italic">"gross√†s"</span>?
                        </div>
                        <div class="space-y-3">
                            <button onclick="checkAnswer(this, false, 'suf1')" class="opt-btn w-full px-6 py-4 border-4 border-blue-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-blue-50 to-blue-100 text-blue-800 shadow-lg">
                                Diminutiu
                            </button>
                            <button onclick="checkAnswer(this, true, 'suf1')" class="opt-btn w-full px-6 py-4 border-4 border-green-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-green-50 to-green-100 text-green-800 shadow-lg">
                                Augmentatiu
                            </button>
                            <button onclick="checkAnswer(this, false, 'suf1')" class="opt-btn w-full px-6 py-4 border-4 border-purple-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-purple-50 to-purple-100 text-purple-800 shadow-lg">
                                Despectiu
                            </button>
                        </div>
                        <div class="feedback mt-4" id="feedback-suf1"></div>
                    </div>

                    <div class="bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-6 mb-6 border-4 border-purple-300">
                        <div class="flex justify-between items-center mb-4">
                            <span class="bg-purple-500 text-white px-4 py-2 rounded-full font-bold text-lg">Exercici 2</span>
                        </div>
                        <div class="text-xl font-semibold text-gray-800 mb-4">
                            Transforma "poeta" en un adjectiu despectiu:
                        </div>
                        <div class="space-y-3">
                            <button onclick="checkAnswer(this, false, 'suf2')" class="opt-btn w-full px-6 py-4 border-4 border-blue-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-blue-50 to-blue-100 text-blue-800 shadow-lg">
                                poetet
                            </button>
                            <button onclick="checkAnswer(this, true, 'suf2')" class="opt-btn w-full px-6 py-4 border-4 border-green-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-green-50 to-green-100 text-green-800 shadow-lg">
                                poetastre
                            </button>
                            <button onclick="checkAnswer(this, false, 'suf2')" class="opt-btn w-full px-6 py-4 border-4 border-purple-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-purple-50 to-purple-100 text-purple-800 shadow-lg">
                                poet√†s
                            </button>
                        </div>
                        <div class="feedback mt-4" id="feedback-suf2"></div>
                    </div>

                    <div class="bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-6 mb-6 border-4 border-purple-300">
                        <div class="flex justify-between items-center mb-4">
                            <span class="bg-purple-500 text-white px-4 py-2 rounded-full font-bold text-lg">Exercici 3</span>
                        </div>
                        <div class="text-xl font-semibold text-gray-800 mb-4">
                            <span class="text-2xl text-purple-700 italic">"Baixota"</span> cont√© un sufix:
                        </div>
                        <div class="space-y-3">
                            <button onclick="checkAnswer(this, false, 'suf3')" class="opt-btn w-full px-6 py-4 border-4 border-blue-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-blue-50 to-blue-100 text-blue-800 shadow-lg">
                                Diminutiu
                            </button>
                            <button onclick="checkAnswer(this, false, 'suf3')" class="opt-btn w-full px-6 py-4 border-4 border-purple-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-purple-50 to-purple-100 text-purple-800 shadow-lg">
                                Augmentatiu
                            </button>
                            <button onclick="checkAnswer(this, true, 'suf3')" class="opt-btn w-full px-6 py-4 border-4 border-green-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-green-50 to-green-100 text-green-800 shadow-lg">
                                Despectiu
                            </button>
                        </div>
                        <div class="feedback mt-4" id="feedback-suf3"></div>
                    </div>
                `,
                's-sorda-sonora': `
                    <div class="bg-gradient-to-br from-pink-50 to-rose-50 rounded-2xl p-6 mb-6 border-4 border-pink-300">
                        <div class="flex justify-between items-center mb-4">
                            <span class="bg-pink-500 text-white px-4 py-2 rounded-full font-bold text-lg">Exercici 1</span>
                        </div>
                        <div class="text-xl font-semibold text-gray-800 mb-4">
                            Completa amb S, SS, C, √á o Z:
                        </div>
                        <div class="space-y-4 text-center">
                            <div class="bg-white p-4 rounded-xl border-2 border-pink-200">
                                <span class="text-2xl font-bold text-purple-700">CA_A</span>
                                <div class="flex gap-2 justify-center mt-2">
                                    <button onclick="selectLetter(this, 'S', 1, 'CASA')" class="letter-btn bg-gradient-to-r from-blue-400 to-blue-500 text-white font-bold py-2 px-6 rounded-xl shadow-lg">S</button>
                                    <button onclick="selectLetter(this, 'SS', 1, 'CASA')" class="letter-btn bg-gradient-to-r from-purple-400 to-purple-500 text-white font-bold py-2 px-6 rounded-xl shadow-lg">SS</button>
                                    <button onclick="selectLetter(this, 'Z', 1, 'CASA')" class="letter-btn bg-gradient-to-r from-pink-400 to-pink-500 text-white font-bold py-2 px-6 rounded-xl shadow-lg">Z</button>
                                </div>
                            </div>
                            <div class="bg-white p-4 rounded-xl border-2 border-pink-200">
                                <span class="text-2xl font-bold text-purple-700">PI_INA</span>
                                <div class="flex gap-2 justify-center mt-2">
                                    <button onclick="selectLetter(this, 'S', 2, 'PISCINA')" class="letter-btn bg-gradient-to-r from-blue-400 to-blue-500 text-white font-bold py-2 px-6 rounded-xl shadow-lg">S</button>
                                    <button onclick="selectLetter(this, 'SC', 2, 'PISCINA')" class="letter-btn bg-gradient-to-r from-green-400 to-green-500 text-white font-bold py-2 px-6 rounded-xl shadow-lg">SC</button>
                                    <button onclick="selectLetter(this, 'C', 2, 'PISCINA')" class="letter-btn bg-gradient-to-r from-orange-400 to-orange-500 text-white font-bold py-2 px-6 rounded-xl shadow-lg">C</button>
                                </div>
                            </div>
                            <div class="bg-white p-4 rounded-xl border-2 border-pink-200">
                                <span class="text-2xl font-bold text-purple-700">PA_ER</span>
                                <div class="flex gap-2 justify-center mt-2">
                                    <button onclick="selectLetter(this, 'S', 3, 'PASSER')" class="letter-btn bg-gradient-to-r from-blue-400 to-blue-500 text-white font-bold py-2 px-6 rounded-xl shadow-lg">S</button>
                                    <button onclick="selectLetter(this, 'SS', 3, 'PASSER')" class="letter-btn bg-gradient-to-r from-purple-400 to-purple-500 text-white font-bold py-2 px-6 rounded-xl shadow-lg">SS</button>
                                    <button onclick="selectLetter(this, 'Z', 3, 'PASSER')" class="letter-btn bg-gradient-to-r from-pink-400 to-pink-500 text-white font-bold py-2 px-6 rounded-xl shadow-lg">Z</button>
                                </div>
                            </div>
                        </div>
                        <div class="feedback mt-4" id="feedback-letters"></div>
                        <button onclick="resetLetters()" class="mt-4 bg-gradient-to-r from-orange-400 to-red-400 text-white font-bold py-3 px-6 rounded-2xl shadow-lg hover:scale-105 transition">
                            <i class="fas fa-redo mr-2"></i>Reiniciar
                        </button>
                    </div>

                    <div class="bg-gradient-to-br from-pink-50 to-rose-50 rounded-2xl p-6 mb-6 border-4 border-pink-300">
                        <div class="flex justify-between items-center mb-4">
                            <span class="bg-pink-500 text-white px-4 py-2 rounded-full font-bold text-lg">Exercici 2</span>
                        </div>
                        <div class="text-xl font-semibold text-gray-800 mb-4 text-center">
                            Classifica aquestes paraules (fes clic per marcar):
                        </div>
                        <div class="flex flex-wrap gap-3 justify-center mb-6">
                            <button onclick="classifyWord(this, 's-sorda')" class="word-card px-6 py-3 border-4 border-gray-300 rounded-2xl font-bold text-xl bg-white shadow-lg">SOL</button>
                            <button onclick="classifyWord(this, 's-sonora')" class="word-card px-6 py-3 border-4 border-gray-300 rounded-2xl font-bold text-xl bg-white shadow-lg">ROSA</button>
                            <button onclick="classifyWord(this, 's-sorda')" class="word-card px-6 py-3 border-4 border-gray-300 rounded-2xl font-bold text-xl bg-white shadow-lg">MASSA</button>
                            <button onclick="classifyWord(this, 's-sonora')" class="word-card px-6 py-3 border-4 border-gray-300 rounded-2xl font-bold text-xl bg-white shadow-lg">M√öSICA</button>
                            <button onclick="classifyWord(this, 's-sorda')" class="word-card px-6 py-3 border-4 border-gray-300 rounded-2xl font-bold text-xl bg-white shadow-lg">CAN√á√ì</button>
                            <button onclick="classifyWord(this, 's-sonora')" class="word-card px-6 py-3 border-4 border-gray-300 rounded-2xl font-bold text-xl bg-white shadow-lg">DESIG</button>
                        </div>
                        <div class="grid md:grid-cols-2 gap-4 mb-4">
                            <div class="bg-red-100 p-6 rounded-2xl border-4 border-red-300">
                                <h4 class="font-bold text-red-700 text-2xl text-center mb-3">üî¥ S SORDA</h4>
                                <div id="s-sorda-box" class="min-h-[60px]"></div>
                            </div>
                            <div class="bg-blue-100 p-6 rounded-2xl border-4 border-blue-300">
                                <h4 class="font-bold text-blue-700 text-2xl text-center mb-3">üîµ S SONORA</h4>
                                <div id="s-sonora-box" class="min-h-[60px]"></div>
                            </div>
                        </div>
                        <button onclick="checkClassification()" class="bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold py-3 px-8 rounded-2xl shadow-lg hover:scale-105 transition mr-2">
                            <i class="fas fa-check mr-2"></i>Comprovar
                        </button>
                        <button onclick="resetClassification()" class="bg-gradient-to-r from-orange-400 to-red-400 text-white font-bold py-3 px-6 rounded-2xl shadow-lg hover:scale-105 transition">
                            <i class="fas fa-redo mr-2"></i>Reiniciar
                        </button>
                        <div class="feedback mt-4" id="feedback-classify"></div>
                    </div>
                `,
                'noticia': `
                    <div class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 mb-6 border-4 border-blue-300">
                        <div class="flex justify-between items-center mb-4">
                            <span class="bg-blue-500 text-white px-4 py-2 rounded-full font-bold text-lg">Exercici 1</span>
                        </div>
                        <div class="text-xl font-semibold text-gray-800 mb-4">
                            Identifica la part de la not√≠cia:<br>
                            <span class="text-2xl text-blue-700 italic">"Incendi a Barcelona"</span>
                        </div>
                        <div class="space-y-3">
                            <button onclick="checkAnswer(this, true, 'not1')" class="opt-btn w-full px-6 py-4 border-4 border-green-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-green-50 to-green-100 text-green-800 shadow-lg">
                                Titular
                            </button>
                            <button onclick="checkAnswer(this, false, 'not1')" class="opt-btn w-full px-6 py-4 border-4 border-blue-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-blue-50 to-blue-100 text-blue-800 shadow-lg">
                                Entrada
                            </button>
                            <button onclick="checkAnswer(this, false, 'not1')" class="opt-btn w-full px-6 py-4 border-4 border-purple-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-purple-50 to-purple-100 text-purple-800 shadow-lg">
                                Cos de la not√≠cia
                            </button>
                            <button onclick="checkAnswer(this, false, 'not1')" class="opt-btn w-full px-6 py-4 border-4 border-pink-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-pink-50 to-pink-100 text-pink-800 shadow-lg">
                                Peu de foto
                            </button>
                        </div>
                        <div class="feedback mt-4" id="feedback-not1"></div>
                    </div>

                    <div class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 mb-6 border-4 border-blue-300">
                        <div class="flex justify-between items-center mb-4">
                            <span class="bg-blue-500 text-white px-4 py-2 rounded-full font-bold text-lg">Exercici 2</span>
                        </div>
                        <div class="text-xl font-semibold text-gray-800 mb-4">
                            Quina pregunta respon aquesta frase?<br>
                            <span class="text-2xl text-blue-700 italic">"L'incendi va oc√≥rrer ahir a la tarda"</span>
                        </div>
                        <div class="space-y-3">
                            <button onclick="checkAnswer(this, false, 'not2')" class="opt-btn w-full px-6 py-4 border-4 border-blue-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-blue-50 to-blue-100 text-blue-800 shadow-lg">
                                Qu√®?
                            </button>
                            <button onclick="checkAnswer(this, false, 'not2')" class="opt-btn w-full px-6 py-4 border-4 border-purple-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-purple-50 to-purple-100 text-purple-800 shadow-lg">
                                Qui?
                            </button>
                            <button onclick="checkAnswer(this, true, 'not2')" class="opt-btn w-full px-6 py-4 border-4 border-green-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-green-50 to-green-100 text-green-800 shadow-lg">
                                Quan?
                            </button>
                            <button onclick="checkAnswer(this, false, 'not2')" class="opt-btn w-full px-6 py-4 border-4 border-pink-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-pink-50 to-pink-100 text-pink-800 shadow-lg">
                                On?
                            </button>
                        </div>
                        <div class="feedback mt-4" id="feedback-not2"></div>
                    </div>

                    <div class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 mb-6 border-4 border-blue-300">
                        <div class="flex justify-between items-center mb-4">
                            <span class="bg-blue-500 text-white px-4 py-2 rounded-full font-bold text-lg">Exercici 3</span>
                        </div>
                        <div class="text-xl font-semibold text-gray-800 mb-4">
                            Escriu un titular per aquesta not√≠cia:
                        </div>
                        <div class="bg-white p-4 rounded-xl border-2 border-blue-200 mb-4 italic text-gray-700">
                            Ahir al mat√≠, un grup d'estudiants de 5√® de prim√†ria de l'escola Gabrielistes van guanyar el primer premi del concurs de rob√≤tica celebrat a Barcelona. Els nens i nenes van crear un robot capa√ß de reciclar pl√†stic autom√†ticament.
                        </div>
                        <input type="text" id="titular-input" placeholder="Escriu el teu titular aqu√≠..." 
                            class="w-full px-6 py-4 border-4 border-blue-300 rounded-2xl text-lg font-semibold">
                        <button onclick="checkTitularAnswer()" 
                            class="mt-4 bg-gradient-to-r from-blue-500 to-indigo-500 text-white font-bold py-3 px-8 rounded-2xl shadow-lg hover:scale-105 transition">
                            <i class="fas fa-check mr-2"></i>Comprovar
                        </button>
                        <div class="feedback mt-4" id="feedback-not3"></div>
                    </div>
                `
            };
            
            return exercises[topic] || '';
        }

        function checkAnswer(button, isCorrect, feedbackId) {
            const options = button.parentElement.querySelectorAll('.opt-btn');
            const feedback = document.getElementById('feedback-' + feedbackId);
            
            options.forEach(opt => {
                opt.disabled = true;
            });
            
            if (isCorrect) {
                button.classList.add('btn-correct');
                feedback.className = 'feedback p-6 rounded-2xl bg-gradient-to-r from-green-100 to-emerald-100 border-l-8 border-green-500 flex items-center gap-3';
                feedback.innerHTML = '<i class="fas fa-trophy text-4xl text-yellow-500"></i> <div class="text-green-800 font-bold text-xl">Molt b√©! Resposta correcta!</div>';
                correctCount++;
            } else {
                button.classList.add('btn-wrong');
                feedback.className = 'feedback p-6 rounded-2xl bg-gradient-to-r from-rose-100 to-pink-100 border-l-8 border-rose-500 flex items-center gap-3';
                feedback.innerHTML = '<i class="fas fa-lightbulb text-4xl text-yellow-400"></i> <div class="text-rose-800 font-bold text-xl">No √©s correcte. Torna-ho a intentar!</div>';
                incorrectCount++;
            }
            
            updateScore();
        }

        function checkOpenAnswer(inputId, feedbackId) {
            const input = document.getElementById(inputId);
            const feedback = document.getElementById('feedback-' + feedbackId);
            const value = input.value.trim();
            
            if (value.length > 0) {
                feedback.className = 'feedback p-6 rounded-2xl bg-gradient-to-r from-green-100 to-emerald-100 border-l-8 border-green-500 flex items-center gap-3';
                feedback.innerHTML = '<i class="fas fa-trophy text-4xl text-yellow-500"></i> <div class="text-green-800 font-bold text-xl">Molt b√©! Has escrit: "' + value + '"</div>';
                correctCount++;
                updateScore();
            } else {
                feedback.className = 'feedback p-6 rounded-2xl bg-gradient-to-r from-rose-100 to-pink-100 border-l-8 border-rose-500 flex items-center gap-3';
                feedback.innerHTML = '<i class="fas fa-exclamation-circle text-4xl text-rose-500"></i> <div class="text-rose-800 font-bold text-xl">Escriu almenys un adjectiu</div>';
            }
        }

        function checkTitularAnswer() {
            const input = document.getElementById('titular-input');
            const feedback = document.getElementById('feedback-not3');
            const value = input.value.trim();
            
            if (value.length > 5) {
                const hasKeywords = value.toLowerCase().includes('estudiants') || 
                                   value.toLowerCase().includes('rob√≤tica') ||
                                   value.toLowerCase().includes('premi') ||
                                   value.toLowerCase().includes('gabrielistes');
                
                if (hasKeywords) {
                    feedback.className = 'feedback p-6 rounded-2xl bg-gradient-to-r from-green-100 to-emerald-100 border-l-8 border-green-500 flex items-center gap-3';
                    feedback.innerHTML = '<i class="fas fa-trophy text-4xl text-yellow-500"></i> <div class="text-green-800 font-bold text-xl">Excel¬∑lent titular!</div>';
                    correctCount++;
                } else {
                    feedback.className = 'feedback p-6 rounded-2xl bg-gradient-to-r from-orange-100 to-yellow-100 border-l-8 border-orange-500 flex items-center gap-3';
                    feedback.innerHTML = '<i class="fas fa-info-circle text-4xl text-orange-500"></i> <div class="text-orange-800 font-bold text-xl">Hauria d\'incloure informaci√≥ essencial</div>';
                    incorrectCount++;
                }
            } else {
                feedback.className = 'feedback p-6 rounded-2xl bg-gradient-to-r from-rose-100 to-pink-100 border-l-8 border-rose-500 flex items-center gap-3';
                feedback.innerHTML = '<i class="fas fa-exclamation-circle text-4xl text-rose-500"></i> <div class="text-rose-800 font-bold text-xl">Escriu un titular</div>';
            }
            updateScore();
        }

        let letterAnswers = {};
        function selectLetter(button, letter, wordNum, correctWord) {
            const allButtons = button.parentElement.querySelectorAll('.letter-btn');
            allButtons.forEach(btn => {
                btn.disabled = true;
                btn.style.opacity = '0.5';
            });
            
            button.style.opacity = '1';
            button.classList.remove('from-blue-400', 'to-blue-500', 'from-purple-400', 'to-purple-500', 'from-pink-400', 'to-pink-500', 'from-green-400', 'to-green-500', 'from-orange-400', 'to-orange-500');
            button.classList.add('from-green-500', 'to-emerald-500');
            
            letterAnswers[wordNum] = { selected: letter, correct: correctWord };
            
            if (Object.keys(letterAnswers).length === 3) {
                let allCorrect = true;
                let correctWords = { 1: 'S', 2: 'SC', 3: 'SS' };
                
                for (let i = 1; i <= 3; i++) {
                    if (letterAnswers[i].selected !== correctWords[i]) {
                        allCorrect = false;
                    }
                }
                
                const feedback = document.getElementById('feedback-letters');
                if (allCorrect) {
                    feedback.className = 'feedback p-6 rounded-2xl bg-gradient-to-r from-green-100 to-emerald-100 border-l-8 border-green-500 flex items-center gap-3';
                    feedback.innerHTML = '<i class="fas fa-trophy text-4xl text-yellow-500"></i> <div class="text-green-800 font-bold text-xl">Perfecte! Totes correctes!</div>';
                    correctCount++;
                } else {
                    feedback.className = 'feedback p-6 rounded-2xl bg-gradient-to-r from-rose-100 to-pink-100 border-l-8 border-rose-500 flex items-center gap-3';
                    feedback.innerHTML = '<i class="fas fa-lightbulb text-4xl text-yellow-400"></i> <div class="text-rose-800 font-bold text-xl">Algunes respostes no s√≥n correctes</div>';
                    incorrectCount++;
                }
                updateScore();
            }
        }

        function resetLetters() {
            letterAnswers = {};
            document.querySelectorAll('.letter-btn').forEach(btn => {
                btn.disabled = false;
                btn.style.opacity = '1';
            });
            document.getElementById('feedback-letters').className = 'feedback';
            document.getElementById('feedback-letters').innerHTML = '';
        }

        let wordClassification = {
            'SOL': 's-sorda',
            'ROSA': 's-sonora',
            'MASSA': 's-sorda',
            'M√öSICA': 's-sonora',
            'CAN√á√ì': 's-sorda',
            'DESIG': 's-sonora'
        };
        let userClassification = {};

        function classifyWord(card, category) {
            const word = card.textContent;
            
            if (card.classList.contains('selected-s-sorda')) {
                card.classList.remove('selected-s-sorda');
                card.classList.add('bg-white');
                delete userClassification[word];
            } else if (card.classList.contains('selected-s-sonora')) {
                card.classList.remove('selected-s-sonora');
                card.classList.add('bg-white');
                delete userClassification[word];
            } else {
                card.classList.remove('bg-white');
                if (category === 's-sorda') {
                    card.classList.add('selected-s-sorda');
                } else {
                    card.classList.add('selected-s-sonora');
                }
                userClassification[word] = category;
            }
        }

        function checkClassification() {
            const feedback = document.getElementById('feedback-classify');
            let correct = 0;
            let total = Object.keys(wordClassification).length;
            
            for (let word in wordClassification) {
                if (userClassification[word] === wordClassification[word]) {
                    correct++;
                }
            }
            
            if (correct === total) {
                feedback.className = 'feedback p-6 rounded-2xl bg-gradient-to-r from-green-100 to-emerald-100 border-l-8 border-green-500 flex items-center gap-3';
                feedback.innerHTML = '<i class="fas fa-trophy text-4xl text-yellow-500"></i> <div class="text-green-800 font-bold text-xl">Perfecte! Totes correctes!</div>';
                correctCount++;
            } else {
                feedback.className = 'feedback p-6 rounded-2xl bg-gradient-to-r from-rose-100 to-pink-100 border-l-8 border-rose-500 flex items-center gap-3';
                feedback.innerHTML = `<i class="fas fa-lightbulb text-4xl text-yellow-400"></i> <div class="text-rose-800 font-bold text-xl">Has encertat ${correct} de ${total}</div>`;
                incorrectCount++;
            }
            updateScore();
        }

        function resetClassification() {
            userClassification = {};
            document.querySelectorAll('.word-card').forEach(card => {
                card.classList.remove('selected-s-sorda', 'selected-s-sonora');
                card.classList.add('bg-white');
            });
            document.getElementById('feedback-classify').className = 'feedback';
            document.getElementById('feedback-classify').innerHTML = '';
        }

        function updateScore() {
            document.getElementById('correct-count').textContent = correctCount;
            document.getElementById('incorrect-count').textContent = incorrectCount;
        }

        async function generateMoreExercises(topic) {
            if (isGenerating) return;
            
            isGenerating = true;
            const button = event.target;
            button.disabled = true;
            button.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Generant exercicis';
            
            const container = document.getElementById(topic + '-extra');
            const loadingDiv = document.createElement('div');
            loadingDiv.className = 'text-center text-2xl font-bold text-purple-700 py-8';
            loadingDiv.innerHTML = '<i class="fas fa-magic mr-2 float-animation"></i>Creant nous exercicis m√†gics<span class="loading"></span>';
            container.appendChild(loadingDiv);
            
            try {
                const prompt = getPromptForTopic(topic);
                const response = await fetch("https://api.anthropic.com/v1/messages", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({
                        model: "claude-sonnet-4-20250514",
                        max_tokens: 2000,
                        messages: [
                            { role: "user", content: prompt }
                        ],
                    })
                });

                const data = await response.json();
                const exercisesHTML = data.content[0].text;
                
                container.removeChild(loadingDiv);
                container.innerHTML += exercisesHTML;
                exerciseCounters[topic]++;
                
                button.disabled = false;
                button.innerHTML = '<i class="fas fa-magic mr-2"></i>Generar m√©s exercicis';
            } catch (error) {
                container.removeChild(loadingDiv);
                container.innerHTML += '<div class="p-6 rounded-2xl bg-gradient-to-r from-rose-100 to-pink-100 border-l-8 border-rose-500"><i class="fas fa-exclamation-triangle text-rose-500"></i> Error generant exercicis. Torna-ho a intentar.</div>';
                button.disabled = false;
                button.innerHTML = '<i class="fas fa-magic mr-2"></i>Generar m√©s exercicis';
            }
            
            isGenerating = false;
        }

        function getPromptForTopic(topic) {
            const baseNum = exerciseCounters[topic] * 3 + 3;
            
            const prompts = {
                'adjectiu': `Genera 3 exercicis nous sobre L'ADJECTIU en catal√† per a 5√® de prim√†ria. Numera'ls com Exercici ${baseNum + 1}, ${baseNum + 2}, ${baseNum + 3}.

Respon NOM√âS amb HTML utilitzant aquest estil EXACTE (copia l'estructura i els estils):

<div class="bg-gradient-to-br from-yellow-50 to-orange-50 rounded-2xl p-6 mb-6 border-4 border-yellow-300">
    <div class="flex justify-between items-center mb-4">
        <span class="bg-yellow-500 text-white px-4 py-2 rounded-full font-bold text-lg">Exercici ${baseNum + 1}</span>
    </div>
    <div class="text-xl font-semibold text-gray-800 mb-4">
        [La teva pregunta aqu√≠]
    </div>
    <div class="space-y-3">
        <button onclick="checkAnswer(this, false, 'adj${baseNum + 1}')" class="opt-btn w-full px-6 py-4 border-4 border-blue-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-blue-50 to-blue-100 text-blue-800 shadow-lg">
            Opci√≥ incorrecta
        </button>
        <button onclick="checkAnswer(this, true, 'adj${baseNum + 1}')" class="opt-btn w-full px-6 py-4 border-4 border-green-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-green-50 to-green-100 text-green-800 shadow-lg">
            Opci√≥ correcta
        </button>
        <button onclick="checkAnswer(this, false, 'adj${baseNum + 1}')" class="opt-btn w-full px-6 py-4 border-4 border-purple-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-purple-50 to-purple-100 text-purple-800 shadow-lg">
            Opci√≥ incorrecta
        </button>
    </div>
    <div class="feedback mt-4" id="feedback-adj${baseNum + 1}"></div>
</div>

Crea exercicis variats: identificar adjectius, concordan√ßa, etc.`,

                'graus': `Genera 3 exercicis nous sobre GRAUS DE L'ADJECTIU en catal√†. Numera Exercici ${baseNum + 1}, ${baseNum + 2}, ${baseNum + 3}.

HTML amb aquest estil:

<div class="bg-gradient-to-br from-orange-50 to-red-50 rounded-2xl p-6 mb-6 border-4 border-orange-300">
    <div class="flex justify-between items-center mb-4">
        <span class="bg-orange-500 text-white px-4 py-2 rounded-full font-bold text-lg">Exercici ${baseNum + 1}</span>
    </div>
    <div class="text-xl font-semibold text-gray-800 mb-4">
        [Pregunta sobre graus]
    </div>
    <div class="space-y-3">
        <button onclick="checkAnswer(this, true, 'grau${baseNum + 1}')" class="opt-btn w-full px-6 py-4 border-4 border-green-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-green-50 to-green-100 text-green-800 shadow-lg">
            Correcta
        </button>
        <button onclick="checkAnswer(this, false, 'grau${baseNum + 1}')" class="opt-btn w-full px-6 py-4 border-4 border-blue-300 rounded-2xl font-bold text-lg bg-gradient-to-br from-blue-50 to-blue-100 text-blue-800 shadow-lg">
            Incorrecta
        </button>
    </div>
    <div class="feedback mt-4" id="feedback-grau${baseNum + 1}"></div>
</div>`,

                'sufixos': `Genera 3 exercicis nous sobre SUFIXOS DE L'ADJECTIU. Numera ${baseNum + 1}, ${baseNum + 2}, ${baseNum + 3}.

HTML:

<div class="bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-6 mb-6 border-4 border-purple-300">
    <div class="flex justify-between items-center mb-4">
        <span class="bg-purple-500 text-white px-4 py-2 rounded-full font-bold text-lg">Exercici ${baseNum + 1}</span>
    </div>
    <div class="text-xl font-semibold text-gray-800 mb-4">
        [Pregunta sobre sufixos]
    </div>
    <div class="space-y-3">
        [Opcions amb checkAnswer]
    </div>
    <div class="feedback mt-4" id="feedback-suf${baseNum + 1}"></div>
</div>`,

                's-sorda-sonora': `Genera 3 exercicis nous sobre S SORDA I SONORA. Numera ${baseNum + 1}, ${baseNum + 2}, ${baseNum + 3}.

HTML:

<div class="bg-gradient-to-br from-pink-50 to-rose-50 rounded-2xl p-6 mb-6 border-4 border-pink-300">
    <div class="flex justify-between items-center mb-4">
        <span class="bg-pink-500 text-white px-4 py-2 rounded-full font-bold text-lg">Exercici ${baseNum + 1}</span>
    </div>
    <div class="text-xl font-semibold text-gray-800 mb-4">
        [Pregunta S sorda/sonora]
    </div>
    <div class="space-y-3">
        [Opcions amb checkAnswer]
    </div>
    <div class="feedback mt-4" id="feedback-ss${baseNum + 1}"></div>
</div>`,

                'noticia': `Genera 3 exercicis nous sobre LA NOT√çCIA. Numera ${baseNum + 1}, ${baseNum + 2}, ${baseNum + 3}.

HTML:

<div class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 mb-6 border-4 border-blue-300">
    <div class="flex justify-between items-center mb-4">
        <span class="bg-blue-500 text-white px-4 py-2 rounded-full font-bold text-lg">Exercici ${baseNum + 1}</span>
    </div>
    <div class="text-xl font-semibold text-gray-800 mb-4">
        [Pregunta sobre la not√≠cia]
    </div>
    <div class="space-y-3">
        [Opcions amb checkAnswer]
    </div>
    <div class="feedback mt-4" id="feedback-not${baseNum + 1}"></div>
</div>`
            };
            
            return prompts[topic];
        }

        // Show first section on load
        window.addEventListener('load', () => {
            showSection('adjectiu');
            setTimeout(() => {
                alert('üéâ Benvinguda! Practica per al teu examen de Catal√†. Molta sort! üí™');
            }, 500);
        });
    </script>
</body>
</html>