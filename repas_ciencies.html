<!DOCTYPE html>
<html lang="ca">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rep√†s Ci√®ncies Naturals üåç</title>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&family=Fredoka+One&display=swap" rel="stylesheet">
<style>
  :root {
    --sky: #e8f4fd;
    --deep: #1a1a3e;
    --star: #ffd700;
    --correct: #2ecc71;
    --wrong: #e74c3c;
    --card: #ffffff;
    --shadow: rgba(0,0,0,0.12);
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Nunito', sans-serif;
    min-height: 100vh;
    background: var(--deep);
    color: #fff;
    overflow-x: hidden;
  }

  /* Stars background */
  body::before {
    content: '';
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    background-image:
      radial-gradient(1px 1px at 10% 20%, #fff 0%, transparent 100%),
      radial-gradient(1px 1px at 30% 60%, #fff 0%, transparent 100%),
      radial-gradient(1.5px 1.5px at 50% 10%, #ffd700 0%, transparent 100%),
      radial-gradient(1px 1px at 70% 40%, #fff 0%, transparent 100%),
      radial-gradient(1.5px 1.5px at 85% 70%, #fff 0%, transparent 100%),
      radial-gradient(1px 1px at 20% 80%, #fff 0%, transparent 100%),
      radial-gradient(1px 1px at 60% 85%, #ffd700 0%, transparent 100%),
      radial-gradient(1px 1px at 90% 15%, #fff 0%, transparent 100%),
      radial-gradient(1px 1px at 45% 55%, #fff 0%, transparent 100%),
      radial-gradient(1.5px 1.5px at 75% 25%, #ffd700 0%, transparent 100%),
      radial-gradient(1px 1px at 15% 45%, #fff 0%, transparent 100%),
      radial-gradient(1px 1px at 35% 30%, #fff 0%, transparent 100%),
      radial-gradient(1px 1px at 55% 70%, #fff 0%, transparent 100%),
      radial-gradient(1px 1px at 92% 50%, #fff 0%, transparent 100%),
      radial-gradient(1.5px 1.5px at 5% 65%, #ffd700 0%, transparent 100%),
      radial-gradient(1px 1px at 80% 90%, #fff 0%, transparent 100%),
      radial-gradient(1px 1px at 25% 95%, #fff 0%, transparent 100%),
      radial-gradient(1px 1px at 65% 5%, #fff 0%, transparent 100%),
      radial-gradient(1px 1px at 40% 75%, #fff 0%, transparent 100%),
      radial-gradient(1.5px 1.5px at 95% 35%, #ffd700 0%, transparent 100%);
    pointer-events: none;
    z-index: 0;
  }

  /* TOP NAV */
  header {
    position: sticky;
    top: 0;
    z-index: 100;
    background: rgba(10,10,40,0.95);
    backdrop-filter: blur(12px);
    border-bottom: 2px solid rgba(255,215,0,0.3);
    padding: 0 20px;
  }

  .header-inner {
    max-width: 1000px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    gap: 12px;
    flex-wrap: wrap;
    padding: 12px 0;
  }

  .logo {
    font-family: 'Fredoka One', cursive;
    font-size: 1.4rem;
    color: var(--star);
    white-space: nowrap;
    margin-right: 8px;
  }

  nav {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    flex: 1;
  }

  .nav-btn {
    font-family: 'Nunito', sans-serif;
    font-weight: 700;
    font-size: 0.8rem;
    padding: 8px 14px;
    border-radius: 30px;
    border: 2px solid transparent;
    cursor: pointer;
    transition: all 0.25s ease;
    white-space: nowrap;
    background: rgba(255,255,255,0.08);
    color: #ccd;
  }

  .nav-btn:hover { transform: translateY(-2px); }

  .nav-btn.active {
    color: #fff;
    border-color: currentColor;
    transform: translateY(-2px);
  }

  .nav-btn[data-topic="astres"].active { background: #6c3483; border-color: #a569bd; color: #e8daef; }
  .nav-btn[data-topic="agua"].active   { background: #1a5276; border-color: #5dade2; color: #d6eaf8; }
  .nav-btn[data-topic="relleu"].active { background: #784212; border-color: #e59866; color: #fdebd0; }
  .nav-btn[data-topic="biosfera"].active { background: #1e5631; border-color: #58d68d; color: #d5f5e3; }

  .nav-btn[data-topic="astres"]:hover   { background: rgba(108,52,131,0.4); }
  .nav-btn[data-topic="agua"]:hover     { background: rgba(26,82,118,0.4); }
  .nav-btn[data-topic="relleu"]:hover   { background: rgba(120,66,18,0.4); }
  .nav-btn[data-topic="biosfera"]:hover { background: rgba(30,86,49,0.4); }

  /* MAIN */
  main {
    position: relative;
    z-index: 1;
    max-width: 780px;
    margin: 0 auto;
    padding: 30px 20px 60px;
  }

  /* WELCOME */
  .welcome {
    text-align: center;
    padding: 60px 20px;
    animation: fadeInUp 0.6s ease;
  }

  .welcome .planet {
    font-size: 5rem;
    animation: float 4s ease-in-out infinite;
    display: block;
    margin-bottom: 20px;
  }

  .welcome h1 {
    font-family: 'Fredoka One', cursive;
    font-size: 2.8rem;
    color: var(--star);
    margin-bottom: 12px;
    line-height: 1.2;
  }

  .welcome p {
    font-size: 1.1rem;
    color: #aab;
    max-width: 500px;
    margin: 0 auto 30px;
    line-height: 1.6;
  }

  .topic-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap: 16px;
    margin-top: 30px;
  }

  .topic-card {
    background: rgba(255,255,255,0.06);
    border: 2px solid rgba(255,255,255,0.12);
    border-radius: 20px;
    padding: 24px 16px;
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: center;
  }

  .topic-card:hover {
    transform: translateY(-6px);
    background: rgba(255,255,255,0.1);
  }

  .topic-card .icon { font-size: 2.8rem; display: block; margin-bottom: 10px; }
  .topic-card .name {
    font-family: 'Fredoka One', cursive;
    font-size: 1rem;
    color: #eee;
  }

  /* QUIZ SECTION */
  .quiz-section { animation: fadeInUp 0.5s ease; }

  .quiz-header {
    display: flex;
    align-items: center;
    gap: 14px;
    margin-bottom: 24px;
  }

  .topic-badge {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 18px;
    border-radius: 30px;
    font-family: 'Fredoka One', cursive;
    font-size: 1.1rem;
  }

  .badge-astres   { background: rgba(108,52,131,0.4); border: 2px solid #a569bd; }
  .badge-agua     { background: rgba(26,82,118,0.4);  border: 2px solid #5dade2; }
  .badge-relleu   { background: rgba(120,66,18,0.4);  border: 2px solid #e59866; }
  .badge-biosfera { background: rgba(30,86,49,0.4);   border: 2px solid #58d68d; }

  .score-display {
    margin-left: auto;
    font-family: 'Fredoka One', cursive;
    font-size: 1rem;
    color: var(--star);
    background: rgba(255,215,0,0.1);
    padding: 6px 16px;
    border-radius: 20px;
    border: 2px solid rgba(255,215,0,0.3);
  }

  .progress-bar-wrap {
    background: rgba(255,255,255,0.1);
    border-radius: 10px;
    height: 8px;
    margin-bottom: 28px;
    overflow: hidden;
  }

  .progress-bar-fill {
    height: 100%;
    border-radius: 10px;
    transition: width 0.5s ease;
    background: linear-gradient(90deg, var(--star), #ff8c00);
  }

  /* QUESTION CARD */
  .question-card {
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.12);
    border-radius: 24px;
    padding: 32px;
    margin-bottom: 20px;
    backdrop-filter: blur(8px);
  }

  .question-num {
    font-size: 0.8rem;
    color: #889;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 12px;
  }

  .question-text {
    font-size: 1.25rem;
    font-weight: 800;
    line-height: 1.5;
    color: #fff;
    margin-bottom: 28px;
  }

  .options {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .option-btn {
    background: rgba(255,255,255,0.06);
    border: 2px solid rgba(255,255,255,0.15);
    border-radius: 14px;
    padding: 14px 20px;
    text-align: left;
    cursor: pointer;
    font-family: 'Nunito', sans-serif;
    font-size: 1rem;
    font-weight: 700;
    color: #dde;
    transition: all 0.25s ease;
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .option-btn:hover:not(:disabled) {
    background: rgba(255,255,255,0.12);
    border-color: rgba(255,255,255,0.35);
    transform: translateX(4px);
    color: #fff;
  }

  .option-letter {
    min-width: 28px;
    height: 28px;
    border-radius: 50%;
    background: rgba(255,255,255,0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.85rem;
    font-weight: 900;
    transition: all 0.2s;
  }

  .option-btn.correct {
    background: rgba(46,204,113,0.2);
    border-color: var(--correct);
    color: #a9f7c7;
  }

  .option-btn.correct .option-letter {
    background: var(--correct);
    color: #fff;
  }

  .option-btn.wrong {
    background: rgba(231,76,60,0.2);
    border-color: var(--wrong);
    color: #f5b7b1;
  }

  .option-btn.wrong .option-letter {
    background: var(--wrong);
    color: #fff;
  }

  .option-btn:disabled { cursor: default; }

  /* FEEDBACK */
  .feedback {
    border-radius: 16px;
    padding: 20px 24px;
    margin-top: 16px;
    font-size: 0.95rem;
    line-height: 1.6;
    display: none;
    animation: fadeInUp 0.4s ease;
  }

  .feedback.show { display: block; }

  .feedback.correct-fb {
    background: rgba(46,204,113,0.15);
    border: 2px solid rgba(46,204,113,0.4);
  }

  .feedback.wrong-fb {
    background: rgba(231,76,60,0.12);
    border: 2px solid rgba(231,76,60,0.35);
  }

  .feedback .fb-title {
    font-family: 'Fredoka One', cursive;
    font-size: 1.1rem;
    margin-bottom: 8px;
  }

  .feedback.correct-fb .fb-title { color: #58d68d; }
  .feedback.wrong-fb .fb-title   { color: #f1948a; }

  .feedback .explanation {
    color: #ccc;
    background: rgba(0,0,0,0.2);
    border-radius: 10px;
    padding: 12px 16px;
    margin-top: 10px;
    font-weight: 600;
    font-style: italic;
    border-left: 3px solid rgba(255,255,255,0.2);
  }

  /* NEXT BUTTON */
  .next-btn {
    display: none;
    margin-top: 20px;
    width: 100%;
    padding: 16px;
    border-radius: 14px;
    font-family: 'Fredoka One', cursive;
    font-size: 1.1rem;
    cursor: pointer;
    border: none;
    transition: all 0.25s ease;
    background: linear-gradient(135deg, #f39c12, #e74c3c);
    color: #fff;
    letter-spacing: 0.5px;
  }

  .next-btn:hover { transform: translateY(-3px); box-shadow: 0 8px 24px rgba(231,76,60,0.4); }
  .next-btn.show { display: block; animation: fadeInUp 0.3s ease; }

  /* RESULTS */
  .results {
    text-align: center;
    padding: 40px 20px;
    animation: fadeInUp 0.6s ease;
  }

  .result-emoji { font-size: 4rem; display: block; margin-bottom: 16px; animation: float 3s ease-in-out infinite; }

  .result-title {
    font-family: 'Fredoka One', cursive;
    font-size: 2.2rem;
    margin-bottom: 10px;
    color: var(--star);
  }

  .result-score {
    font-size: 1.2rem;
    color: #aab;
    margin-bottom: 30px;
  }

  .result-score strong { color: #fff; font-size: 2rem; }

  .result-actions {
    display: flex;
    gap: 14px;
    justify-content: center;
    flex-wrap: wrap;
  }

  .result-btn {
    padding: 14px 28px;
    border-radius: 30px;
    border: none;
    font-family: 'Fredoka One', cursive;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.25s ease;
    letter-spacing: 0.5px;
  }

  .result-btn:hover { transform: translateY(-3px); }

  .btn-retry {
    background: linear-gradient(135deg, #9b59b6, #6c3483);
    color: #fff;
    box-shadow: 0 4px 16px rgba(155,89,182,0.4);
  }

  .btn-home {
    background: rgba(255,255,255,0.1);
    color: #ddd;
    border: 2px solid rgba(255,255,255,0.2);
  }

  /* Stars earned display */
  .stars-row {
    display: flex;
    justify-content: center;
    gap: 8px;
    margin: 20px 0;
    font-size: 2rem;
  }

  /* ANIMATIONS */
  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(20px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50%       { transform: translateY(-12px); }
  }

  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    20%, 60%  { transform: translateX(-6px); }
    40%, 80%  { transform: translateX(6px); }
  }

  .shake { animation: shake 0.4s ease; }

  /* Responsive */
  @media (max-width: 600px) {
    .welcome h1 { font-size: 2rem; }
    .question-text { font-size: 1.1rem; }
    .question-card { padding: 22px 18px; }
  }
</style>
</head>
<body>

<header>
  <div class="header-inner">
    <div class="logo">üåç Ci√®ncies 5√®</div>
    <nav id="mainNav">
      <button class="nav-btn" data-topic="astres" onclick="startTopic('astres')">ü™ê Astres i Univers</button>
      <button class="nav-btn" data-topic="agua" onclick="startTopic('agua')">üíß L'Aigua</button>
      <button class="nav-btn" data-topic="relleu" onclick="startTopic('relleu')">‚õ∞Ô∏è El Relleu</button>
      <button class="nav-btn" data-topic="biosfera" onclick="startTopic('biosfera')">üåø La Biosfera</button>
    </nav>
  </div>
</header>

<main id="mainContent">
  <!-- Welcome screen -->
  <div class="welcome" id="welcomeScreen">
    <span class="planet">üöÄ</span>
    <h1>Hola, exploradora!</h1>
    <p>Tria un tema per repassar el teu examen de Ci√®ncies Naturals. Tens preguntes de tots els temes. Endavant! ‚≠ê</p>
    <div class="topic-cards">
      <div class="topic-card" onclick="startTopic('astres')">
        <span class="icon">ü™ê</span>
        <span class="name">Astres i Univers</span>
      </div>
      <div class="topic-card" onclick="startTopic('agua')">
        <span class="icon">üíß</span>
        <span class="name">L'Aigua</span>
      </div>
      <div class="topic-card" onclick="startTopic('relleu')">
        <span class="icon">‚õ∞Ô∏è</span>
        <span class="name">El Relleu</span>
      </div>
      <div class="topic-card" onclick="startTopic('biosfera')">
        <span class="icon">üåø</span>
        <span class="name">La Biosfera</span>
      </div>
    </div>
  </div>
  <div id="quizContainer" style="display:none;"></div>
</main>

<script>
// ============================================================
// QUIZ DATA ‚Äî strictly based on the PDFs provided
// ============================================================
const topics = {
  astres: {
    name: "Astres i Univers",
    icon: "ü™ê",
    color: "astres",
    questions: [
      {
        q: "Quin dels seg√ºents astres brilla amb llum pr√≤pia?",
        opts: ["Els planetes","Les estrelles","Els sat√®l¬∑lits","Els asteroides"],
        answer: 1,
        explanation: "Les estrelles s√≥n astres que brillen amb llum pr√≤pia. S√≥n formades per gasos a temperatures molt altes que emeten llum."
      },
      {
        q: "Quin √©s el planeta m√©s gran del sistema solar i el que t√© m√©s sat√®l¬∑lits?",
        opts: ["Saturn","Nept√∫","J√∫piter","Mart"],
        answer: 2,
        explanation: "J√∫piter √©s el planeta m√©s gran del sistema solar i el que t√© m√©s sat√®l¬∑lits (63)."
      },
      {
        q: "Com s'anomena la for√ßa que fa que un astre atregui els cossos que hi ha a la seva superf√≠cie?",
        opts: ["La translaci√≥","La gravetat","La rotaci√≥","L'√≤rbita"],
        answer: 1,
        explanation: "La for√ßa de la gravetat √©s la for√ßa que fa que un astre atregui els cossos que hi ha a la seva superf√≠cie."
      },
      {
        q: "Quants planetes t√© el sistema solar?",
        opts: ["Set","Nou","Vuit","Deu"],
        answer: 2,
        explanation: "El sistema solar √©s format pel Sol i per un conjunt de vuit planetes i els seus sat√®l¬∑lits, que hi giren al voltant."
      },
      {
        q: "Com s'anomena la gal√†xia on es troben el Sol i la Terra?",
        opts: ["Andr√≤meda","La Via L√†ctia","Cam√≠ de la Lluna","El Bra√ß Espiral"],
        answer: 1,
        explanation: "La gal√†xia on hi ha el Sol i la Terra √©s la Via L√†ctia, que cont√© al voltant de 200.000 milions d'estrelles."
      },
      {
        q: "Quina forma t√© la Via L√†ctia?",
        opts: ["Rodona","El¬∑l√≠ptica","Espiral","Triangular"],
        answer: 2,
        explanation: "La Via L√†ctia t√© forma d'espiral, amb diversos bra√ßos, i gira sobre un eix central. La Terra est√† situada a l'extrem d'un d'aquests bra√ßos."
      },
      {
        q: "Quan un petit meteorit xoca amb l'atmosfera de la Terra, s'enc√©n i forma...",
        opts: ["Un cometa","Un asteroide","Un estel fugisser","Una glacera"],
        answer: 2,
        explanation: "Quan un petit meteorit xoca amb l'atmosfera de la Terra, s'enc√©n i forma el que es coneix com un estel fugisser."
      },
      {
        q: "Com s'anomena el recorregut que fa un planeta al voltant d'una estrella?",
        opts: ["Rotaci√≥","Translaci√≥","√írbita","Gravetat"],
        answer: 2,
        explanation: "El recorregut que fa un planeta al voltant d'una estrella s'anomena √≤rbita."
      },
      {
        q: "El Sol es va formar fa uns...",
        opts: ["500 milions d'anys","1.000 milions d'anys","5.000 milions d'anys","10.000 milions d'anys"],
        answer: 2,
        explanation: "El Sol es va formar fa uns 5.000 milions d'anys i t√© un di√†metre d'1,4 milions de quil√≤metres, aproximadament."
      },
      {
        q: "Quina caracter√≠stica especial t√© la Terra que permet l'exist√®ncia de vida?",
        opts: ["√âs el planeta m√©s gran","T√© les temperatures adequades, exist√®ncia d'aigua i atmosfera amb oxigen","T√© molt de ferro","Queda molt a prop del Sol"],
        answer: 1,
        explanation: "Entre les caracter√≠stiques especials de la Terra hi ha les temperatures que s'hi enregistren, l'exist√®ncia d'aigua i una atmosfera rica en oxigen."
      },
      {
        q: "On es troben la majoria dels asteroides del sistema solar?",
        opts: ["Entre el Sol i Mercuri","Entre Venus i la Terra","Entre Mart i J√∫piter","Entre Saturn i Ur√†"],
        answer: 2,
        explanation: "Es considera que hi ha mig mili√≥ d'asteroides i la majoria estan situats entre les √≤rbites dels planetes Mart i J√∫piter."
      },
      {
        q: "Quin √©s el nom popular de la Via L√†ctia?",
        opts: ["Cam√≠ de les Estrelles","Cam√≠ de Sant Jaume","Cam√≠ de la Lluna","Via de la Nit"],
        answer: 1,
        explanation: "La Via L√†ctia tamb√© es coneix popularment amb el nom de Cam√≠ de Sant Jaume."
      },
      {
        q: "A quina dist√†ncia aproximada es troba el Sol de la Terra?",
        opts: ["15 milions de km","150 milions de km","1.500 milions de km","1,4 milions de km"],
        answer: 1,
        explanation: "El Sol est√† situat a uns 150 milions de quil√≤metres de la Terra."
      },
      {
        q: "Com es diu la capa m√©s externa de la Terra?",
        opts: ["La geosfera","La hidrosfera","La biosfera","L'atmosfera"],
        answer: 3,
        explanation: "L'atmosfera √©s la capa m√©s externa de la Terra, d'uns 1.000 quil√≤metres de gruix, formada principalment per una mescla de gasos."
      },
      {
        q: "Com s'anomenen els cossos que giren al voltant d'un planeta?",
        opts: ["Estrelles","Asteroides","Sat√®l¬∑lits","Cometes"],
        answer: 2,
        explanation: "Els sat√®l¬∑lits no tenen llum pr√≤pia i giren al voltant d'un planeta descrivint tamb√© una √≤rbita."
      }
    ]
  },
  agua: {
    name: "L'Aigua",
    icon: "üíß",
    color: "agua",
    questions: [
      {
        q: "Com s'anomena el conjunt de tota l'aigua que hi ha al nostre planeta?",
        opts: ["La biosfera","L'atmosfera","La hidrosfera","La litosfera"],
        answer: 2,
        explanation: "La hidrosfera √©s el conjunt de tota l'aigua que hi ha al nostre planeta."
      },
      {
        q: "En quins estats pot estar l'aigua a la Terra?",
        opts: ["L√≠quid i s√≤lid","L√≠quid, s√≤lid i gas√≥s","Gas√≥s i s√≤lid","Nom√©s en estat l√≠quid"],
        answer: 1,
        explanation: "L'aigua que hi ha a la Terra pot estar en estat l√≠quid, s√≤lid o gas√≥s."
      },
      {
        q: "Quin percentatge de l'aigua de la Terra √©s salada?",
        opts: ["50%","75%","97%","30%"],
        answer: 2,
        explanation: "L'aigua salada √©s als mars i als oceans i suposa un 97% del total de l'aigua del planeta, mentre que la resta √©s aigua dol√ßa."
      },
      {
        q: "En el cicle de l'aigua, com s'anomena l'etapa en que l'aigua l√≠quida es converteix en vapor a causa de l'escalfor del sol?",
        opts: ["La condensaci√≥","La solidificaci√≥","La fusi√≥","L'evaporaci√≥"],
        answer: 3,
        explanation: "L'evaporaci√≥: l'aigua l√≠quida es converteix en vapor d'aigua a causa de l'escalfor del sol. El vapor d'aigua queda dispers en l'aire, barrejat amb altres gasos."
      },
      {
        q: "Quan el vapor d'aigua puja a l'atmosfera i es refreda, tornant a estat l√≠quid i formant n√∫vols, com s'anomena aquest proc√©s?",
        opts: ["L'evaporaci√≥","La condensaci√≥","La fusi√≥","La precipitaci√≥"],
        answer: 1,
        explanation: "La condensaci√≥: quan el vapor d'aigua s'eleva a l'atmosfera, es refreda i es condensa, √©s a dir, torna a l'estat l√≠quid i es converteix en petites gotes d'aigua, que formen els n√∫vols."
      },
      {
        q: "En quin curs d'un riu √©s l'aigua m√©s cabalosa per√≤ corre amb menys velocitat?",
        opts: ["Curs alt","Curs mitj√†","Curs baix","Desembocadura"],
        answer: 2,
        explanation: "El curs baix √©s on el riu √©s m√©s cabal√≥s, per√≤ les seves aig√ºes discorren a poca velocitat perqu√® sovint travessen zones for√ßa planes."
      },
      {
        q: "Com s'anomena la quantitat d'aigua que porta un riu?",
        opts: ["El curs","El cabal","El llit","El meandre"],
        answer: 1,
        explanation: "El cabal d'un riu √©s la quantitat d'aigua que porta."
      },
      {
        q: "Quin √©s el final d'un riu on pot desembocar al mar, un llac o un altre riu?",
        opts: ["El naixement","El curs alt","La desembocadura","El meandre"],
        answer: 2,
        explanation: "La desembocadura √©s el final d'un riu, que pot ser el mar, un llac o un altre riu. Es poden formar deltes."
      },
      {
        q: "Com s'anomena un revolt molt marcat que fa un riu, generalment en el curs mitj√†?",
        opts: ["Una cascada","Un afluent","Un estany","Un meandre"],
        answer: 3,
        explanation: "Un meandre √©s un revolt molt marcat que fa un riu, generalment en el curs mitj√†."
      },
      {
        q: "Com s'anomena un corrent d'aigua que nom√©s es forma quan plou?",
        opts: ["Un rierol","Una riera","Un torrent","Un afluent"],
        answer: 1,
        explanation: "Una riera √©s un corrent d'aigua que nom√©s es forma quan plou."
      },
      {
        q: "Al curs alt d'un riu, quin proc√©s √©s predominant?",
        opts: ["Depositar sediments","Transportar materials lentament","Erosionar el terreny per la for√ßa del corrent","Formar meandres"],
        answer: 2,
        explanation: "Al curs alt, el riu porta poca aigua, per√≤ com que el pendent √©s molt fort, t√© molta for√ßa, arrenca materials i erosiona el terreny."
      },
      {
        q: "Com s'anomena una gran massa de gel situada a zones fredes que es despla√ßa?",
        opts: ["Un estany","Una glacera","Un llac","Una riera"],
        answer: 1,
        explanation: "Una glacera √©s una gran massa de gel situada a zones fredes que es despla√ßa."
      },
      {
        q: "Com s'anomena un riu que desemboca en un altre riu?",
        opts: ["Un torrent","Un rierol","Un afluent","Una cascada"],
        answer: 2,
        explanation: "Un afluent √©s un riu que desemboca en un altre riu."
      }
    ]
  },
  relleu: {
    name: "El Relleu",
    icon: "‚õ∞Ô∏è",
    color: "relleu",
    questions: [
      {
        q: "Com s'anomenen els agents geol√≤gics que tenen el seu origen a l'interior de la Terra?",
        opts: ["Agents geol√≤gics externs","Agents geol√≤gics interns","Agents atmosf√®rics","Agents hidrol√≤gics"],
        answer: 1,
        explanation: "Els agents geol√≤gics interns tenen el seu origen a l'interior de la Terra i poden modificar el relleu en poc temps."
      },
      {
        q: "Quin fenomen geol√≤gic es produeix quan els materials sotmesos a pressi√≥ s√≥n prou flexibles i es dobleguen?",
        opts: ["Una falla","Un terratremol","Un plegament","Un volc√†"],
        answer: 2,
        explanation: "Un plegament es produeix quan els materials sotmesos a pressi√≥ s√≥n prou flexibles i es dobleguen, com ho fa un full de paper si l'empenyem pels dos extrems."
      },
      {
        q: "Quin fenomen geol√≤gic es produeix quan els materials sotmesos a pressi√≥ no s√≥n prou flexibles i es trenquen, formant desnivells?",
        opts: ["Un plegament","Una falla","Una erupci√≥ volc√†nica","Un terratremol"],
        answer: 1,
        explanation: "Una falla es produeix quan els materials sotmesos a pressi√≥ no s√≥n prou flexibles i es trenquen. Uns blocs es desplacen respecte a uns altres i formen desnivells."
      },
      {
        q: "Quins s√≥n els principals agents geol√≤gics externs?",
        opts: ["Els volcans, els terratr√®mols i les falles","El vent, l'aigua i els √©ssers vius","El magma, la lava i les cendres","Els plegaments, les falles i les erupcions"],
        answer: 1,
        explanation: "Els principals agents geol√≤gics externs s√≥n el vent (atmosfera), l'aigua (hidrosfera) i els √©ssers vius (biosfera)."
      },
      {
        q: "Com s'anomena el proc√©s d'alteraci√≥ i destrucci√≥ de les roques per acci√≥ dels agents externs?",
        opts: ["L'erosi√≥","El transport","La sedimentaci√≥","La meteoritzaci√≥"],
        answer: 3,
        explanation: "La meteoritzaci√≥ √©s l'alteraci√≥ i la destrucci√≥ de les roques i els minerals per acci√≥ dels diferents agents."
      },
      {
        q: "Com s'anomena el proc√©s de deposici√≥ dels materials erosionats i transportats?",
        opts: ["La meteoritzaci√≥","L'erosi√≥","La sedimentaci√≥","El transport"],
        answer: 2,
        explanation: "La sedimentaci√≥ √©s la deposici√≥ dels materials que han estat erosionats i transportats."
      },
      {
        q: "Com s'anomenen les roques que es formen a partir de les altes pressions i temperatures quan dues plaques litosf√®riques es toquen?",
        opts: ["Roques volc√†niques","Roques sediment√†ries","Roques metam√≤rfiques","Roques calc√†ries"],
        answer: 2,
        explanation: "Les altes pressions, sovint acompanyades d'altes temperatures, poden provocar que les roques es transformin i que se'n cre√Øn de noves, les roques metam√≤rfiques, com la pissarra o el marbre."
      },
      {
        q: "Quin efecte t√© l'aigua quan es fica a les escletxes de les roques i es gela?",
        opts: ["Les escalfa i les dilata","Les dissol completament","Augmenta de volum i pot esberlar la roca","Les cobreix de capes protectores"],
        answer: 2,
        explanation: "L'aigua en estat s√≤lid ocupa m√©s espai que la mateixa quantitat en estat l√≠quid. Per tant, l'aigua, quan es gela, augmenta de volum i pot esberlar la roca."
      },
      {
        q: "Quin efecte provoca el vent sobre les roques?",
        opts: ["Les refreda","Les humidifica","Les erosiona","Les solidifica"],
        answer: 2,
        explanation: "L'impacte de l'aire en moviment sobre les roques, el vent, en provoca l'erosi√≥. El mateix vent transporta les part√≠cules, i quan perd for√ßa o troba algun obstacle, les diposita."
      },
      {
        q: "Quin √©s el proc√©s de desgast i despreniment de materials que despr√©s es transporten?",
        opts: ["La meteoritzaci√≥","La sedimentaci√≥","L'erosi√≥","El plegament"],
        answer: 2,
        explanation: "L'erosi√≥ √©s el proc√©s de desgast i despreniment de materials, que despr√©s es transporten."
      },
      {
        q: "Com afecten les plantes al relleu amb les seves arrels?",
        opts: ["Erosionen el terra amb el seu pes","Poden fracturar les roques per√≤ tamb√© fixen el s√≤l","No tenen cap efecte sobre les roques","Transporten materials cap a altri lloc"],
        answer: 1,
        explanation: "Les plantes, amb les arrels, poden fracturar les roques; d'altra banda, les arrels contribueixen a fixar el s√≤l."
      },
      {
        q: "Quin tipus de roques es poden formar quan s'acumulen molts materials sedimentaris?",
        opts: ["Roques metam√≤rfiques","Roques volc√†niques","Roques sediment√†ries","Roques bas√†ltiques"],
        answer: 2,
        explanation: "Quan s'acumulen molts materials sedimentaris, el seu propi pes pot provocar la formaci√≥ d'un nou tipus de roques, les roques sediment√†ries, com l'argila, el conglomerat o la calc√†ria."
      },
      {
        q: "Quin d'aquests √©s un exemple de l'acci√≥ dels √©ssers humans sobre el relleu?",
        opts: ["La formaci√≥ de dunes","La construcci√≥ de vies de comunicaci√≥ i embassaments","L'erosi√≥ per l'onatge del mar","La formaci√≥ de meandres"],
        answer: 1,
        explanation: "Els √©ssers humans provoquem transformacions molt importants del relleu amb la construcci√≥ de vies de comunicaci√≥, embassaments, pedreres, etc."
      }
    ]
  },
  biosfera: {
    name: "La Biosfera",
    icon: "üåø",
    color: "biosfera",
    questions: [
      {
        q: "Com s'anomena la zona de la Terra on viuen els √©ssers vius?",
        opts: ["La hidrosfera","L'atmosfera","La biosfera","La litosfera"],
        answer: 2,
        explanation: "La biosfera √©s la zona de la Terra on viuen els √©ssers vius. La biosfera inclou la hidrosfera, part de la litosfera i la part inferior de l'atmosfera."
      },
      {
        q: "Com s'anomena el conjunt que formen els √©ssers vius i el medi ambient d'un lloc determinat i les relacions que estableixen entre ells?",
        opts: ["Una esp√®cie","Un ecosistema","Una comunitat","Un h√†bitat"],
        answer: 1,
        explanation: "Un ecosistema √©s el conjunt que formen els √©ssers vius i el medi ambient d'un lloc determinat i les relacions que estableixen entre ells."
      },
      {
        q: "Per quina ra√≥ la Terra √©s l'√∫nic planeta que coneixem on hi ha vida?",
        opts: ["Perqu√® √©s el planeta m√©s gran","Perqu√® t√© unes condicions especials que permeten variacions de temperatura, llum i humitat adequades","Perqu√® √©s el planeta m√©s pr√≤xim al Sol","Perqu√® no t√© sat√®l¬∑lits"],
        answer: 1,
        explanation: "La Terra √©s l'√∫nic planeta que coneixem on hi ha vida perqu√® t√© unes condicions especials (dist√†ncia del Sol, mida i moviments), que permeten que hi hagi les variacions de temperatura, de llum i d'humitat necess√†ries."
      },
      {
        q: "Quin dels seg√ºents √©s un exemple d'ecosistema?",
        opts: ["Una roca","Un n√∫vol","Un alzinar","Un planeta"],
        answer: 2,
        explanation: "Un alzinar, una bassa o la sabana s√≥n exemples d'ecosistemes."
      },
      {
        q: "Quines condicions t√© el medi aqu√†tic comparades amb el medi terrestre?",
        opts: ["Condicions molt canviants amb grans variacions de temperatura","Condicions for√ßa constants, amb poques variacions de temperatura, per√≤ menys llum","Condicions molt seques","Temperatures extremadament altes"],
        answer: 1,
        explanation: "Les condicions del medi aqu√†tic s√≥n for√ßa constants, amb poques variacions de temperatura, encara que hi ha menys llum que al medi terrestre."
      },
      {
        q: "Per quin motiu els animals terrestres tenen pell gruixuda, p√®ls o plomes?",
        opts: ["Per volar millor","Per evitar la p√®rdua d'aigua del cos i mantenir la temperatura constant","Per defensar-se dels depredadors","Per nedar millor"],
        answer: 1,
        explanation: "Les condicions del medi terrestre han fet que els animals tinguin mecanismes per a evitar la p√®rdua d'aigua del seu cos i per a mantenir la temperatura constant (pells gruixudes, p√®ls o plomes, etc.)."
      },
      {
        q: "Quina adaptaci√≥ han desenvolupat les plantes del medi terrestre per obtenir l'aigua del s√≤l?",
        opts: ["Han creat fulles molt grans","Han desenvolupat sistemes d'arrels complexos","Han redu√Øt la seva mida","Han canviat de color"],
        answer: 1,
        explanation: "Les condicions del medi terrestre han fet que les plantes hagin desenvolupat sistemes d'arrels complexos per a captar l'aigua del s√≤l."
      },
      {
        q: "Com s'anomenen els organismes dels ecosistemes aqu√†tics que presenten adaptacions en la forma del seu cos?",
        opts: ["Presenten ales per volar","Presenten adaptacions per facilitar el despla√ßament en l'aigua","Presenten pell molt gruixuda","Presenten molts p√®ls"],
        answer: 1,
        explanation: "Els organismes que viuen al medi aqu√†tic presenten adaptacions en la forma del seu cos per a facilitar el despla√ßament en l'aigua."
      },
      {
        q: "Podem trobar √©ssers vius al medi aqu√†tic fins a...",
        opts: ["Nom√©s a la superf√≠cie","Fins a 10 metres de profunditat","Grans profunditats","Fins al fons de sorra"],
        answer: 2,
        explanation: "El medi aqu√†tic ocupa la major part de la superf√≠cie terrestre i √©s habitat pels √©ssers vius des de la superf√≠cie fins a grans profunditats."
      },
      {
        q: "Quin efecte t√© qualsevol canvi en un element d'un ecosistema?",
        opts: ["Afecta nom√©s aquell element","Repercuteix en tots els altres elements","No t√© cap efecte","Millora l'ecosistema"],
        answer: 1,
        explanation: "Tots els √©ssers vius d'un ecosistema mantenen estretes relacions entre ells. Qualsevol canvi en algun dels elements de l'ecosistema repercuteix en els altres."
      },
      {
        q: "Quins dos grans tipus de medi podem distingir per als √©ssers vius?",
        opts: ["Medi fred i medi c√†lid","Medi aqu√†tic i medi terrestre","Medi humit i medi sec","Medi interior i medi exterior"],
        answer: 1,
        explanation: "El fet que una part de la superf√≠cie terrestre √©s coberta d'aigua i la resta no, delimita dos grans grups de comunitats d'√©ssers vius: els que viuen en un medi aqu√†tic i els que viuen en un medi terrestre."
      }
    ]
  }
};

// ============================================================
// STATE
// ============================================================
let currentTopic = null;
let questions = [];
let qIndex = 0;
let score = 0;
let answered = false;

function shuffle(arr) {
  return [...arr].sort(() => Math.random() - 0.5);
}

function startTopic(topicKey) {
  currentTopic = topicKey;
  qIndex = 0;
  score = 0;
  answered = false;

  // Shuffle and pick 10 questions
  questions = shuffle(topics[topicKey].questions).slice(0, 10);

  // Nav active state
  document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
  document.querySelector(`[data-topic="${topicKey}"]`).classList.add('active');

  document.getElementById('welcomeScreen').style.display = 'none';
  document.getElementById('quizContainer').style.display = 'block';
  renderQuestion();
}

function renderQuestion() {
  if (qIndex >= questions.length) {
    renderResults();
    return;
  }

  const topic = topics[currentTopic];
  const q = questions[qIndex];
  answered = false;

  const pct = Math.round((qIndex / questions.length) * 100);
  const letters = ['A','B','C','D'];

  const html = `
    <div class="quiz-section">
      <div class="quiz-header">
        <div class="topic-badge badge-${topic.color}">
          ${topic.icon} ${topic.name}
        </div>
        <div class="score-display">‚≠ê ${score}/${qIndex}</div>
      </div>
      <div class="progress-bar-wrap">
        <div class="progress-bar-fill" style="width:${pct}%"></div>
      </div>
      <div class="question-card">
        <div class="question-num">Pregunta ${qIndex + 1} de ${questions.length}</div>
        <div class="question-text">${q.q}</div>
        <div class="options" id="optionsContainer">
          ${q.opts.map((opt, i) => `
            <button class="option-btn" id="opt${i}" onclick="selectAnswer(${i})">
              <span class="option-letter">${letters[i]}</span>
              ${opt}
            </button>
          `).join('')}
        </div>
        <div class="feedback" id="feedbackBox"></div>
      </div>
      <button class="next-btn" id="nextBtn" onclick="nextQuestion()">
        ${qIndex < questions.length - 1 ? 'Seg√ºent pregunta ‚Üí' : 'Veure resultats üèÜ'}
      </button>
    </div>
  `;

  document.getElementById('quizContainer').innerHTML = html;
}

function selectAnswer(selected) {
  if (answered) return;
  answered = true;

  const q = questions[qIndex];
  const opts = document.querySelectorAll('.option-btn');
  const feedback = document.getElementById('feedbackBox');

  opts.forEach(b => b.disabled = true);

  if (selected === q.answer) {
    score++;
    opts[selected].classList.add('correct');
    feedback.className = 'feedback correct-fb show';
    feedback.innerHTML = `
      <div class="fb-title">‚úÖ Molt b√©! Resposta correcta!</div>
      <div class="explanation">"${q.explanation}"</div>
    `;
  } else {
    opts[selected].classList.add('wrong');
    opts[q.answer].classList.add('correct');
    feedback.className = 'feedback wrong-fb show';
    feedback.innerHTML = `
      <div class="fb-title">‚ùå Ups! Aquesta no era... La resposta correcta era la ${['A','B','C','D'][q.answer]}.</div>
      <div class="explanation">"${q.explanation}"</div>
    `;
    // Shake wrong answer
    opts[selected].classList.add('shake');
    setTimeout(() => opts[selected].classList.remove('shake'), 500);
  }

  document.getElementById('nextBtn').classList.add('show');
}

function nextQuestion() {
  qIndex++;
  renderQuestion();
}

function renderResults() {
  const topic = topics[currentTopic];
  const pct = Math.round((score / questions.length) * 100);
  let emoji, title, msg;

  if (pct === 100) {
    emoji = "üèÜ"; title = "Perfect! Ets una geni!"; msg = "Has encertat totes les preguntes. Incre√Øble!";
  } else if (pct >= 80) {
    emoji = "üåü"; title = "Excel¬∑lent!"; msg = "Ho has fet molt b√©. Ets una crack!";
  } else if (pct >= 60) {
    emoji = "üòä"; title = "Molt b√©!"; msg = "Bon resultat! Repassant una mica m√©s, ho bordar√†s.";
  } else if (pct >= 40) {
    emoji = "üí™"; title = "Anem b√©!"; msg = "Segueix estudiant, ho aconseguir√†s!";
  } else {
    emoji = "üìö"; title = "A estudiar!"; msg = "Calma, torna a repassar el tema i ho far√†s millor!";
  }

  const stars = Math.round((score / questions.length) * 5);
  const starsRow = '‚≠ê'.repeat(stars) + '‚òÜ'.repeat(5 - stars);

  document.getElementById('quizContainer').innerHTML = `
    <div class="results">
      <span class="result-emoji">${emoji}</span>
      <div class="result-title">${title}</div>
      <div class="result-score">
        Has encertat <strong>${score}</strong> de ${questions.length} preguntes
      </div>
      <div class="stars-row">${starsRow}</div>
      <p style="color:#99a;margin-bottom:30px;font-size:1rem;">${msg}</p>
      <div class="result-actions">
        <button class="result-btn btn-retry" onclick="startTopic('${currentTopic}')">
          üîÑ Tornar a intentar-ho
        </button>
        <button class="result-btn btn-home" onclick="goHome()">
          üè† Triar altre tema
        </button>
      </div>
    </div>
  `;
}

function goHome() {
  document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
  document.getElementById('quizContainer').style.display = 'none';
  document.getElementById('welcomeScreen').style.display = 'block';
  currentTopic = null;
}
</script>
</body>
</html>
